# 브라우저

### 브라우저 URL 이동 과정

브라우저에 URL을 입력했을 때 해당 페이지를 화면에 띄워주는 과정

1. 사용자 인테페이스
2. DNS 과정
3. 렌더링 과정



1. handling inputs : user 가 URL창에 text 입력

	브라우저 프로세스안에 UI Thread 가 유저가 입력한 text가 search query인지 URL인지를 판단한다.

	search query : search engine 으로 query를 보낼 준비

	URL : network thread로 URL을 전달할 준비

2. start navigation 


**랜더링**

브라우저의 랜더링 엔진은 서버로 부터 받아온 정보를 화면에 그리는 역할을 수행하는데 그 과정은 다음과 같다.

1. HTML 파싱

랜더링 엔진의 파싱과정을 공부하며 느꼈는데 쉘스크립트의 파싱과정과 꽤나 흡사했다. 그 과정을 간략하게 요약하며 아래와 같다.

토큰화 -> 노드화 -> DOM tree구축

2. CSS 파싱

CSS도 HTML 파싱과 동일한 과저을 겪으며 CSSOM 을 생성한다.

3. 렌더 트리 생성

DOM 트리와 CSSOM 트리를 조합하여 랜더링 요소와 해당 스타일을 포함하여  화면에 실제로 표시되는 요소들의 집합을 생성한다.

4. 레이아웃 계산

렌더 트리 생성 이후 각 요소들의 크기와 위치를 계산하여 레이아웃을 구성한다.
브라우저 창 내에서 요소들이 어떻게 배치되는지를 결정

5. 화면에 그리기

레이어 별로 요소들을 실제로 화면에 그리고 해당 레이어들을 합쳐서 화면에 출력한다.

**JS**

DOM 구조를 그리는 도중 자바스크립트 코드를 만나게되면 브라우저는 자바스크립트의 코드를 실행하고 DOM 구조의 그림을 일시적으로 멈춘다.

그 이유는 자바스크립트 동작 이후 DOM이 다시 그려질 수 있기 때문이다. 
DOM을 그리는 과정중에 자바스크립트로 인해 수시로 다시 그려야하면 비효율적이니 잠시 멈추고 js동작이 끝난 이후 한번에 변경된 DOM 요소를 새로 그리고, 화면에 업데이트된 내용을 표시하는것

그래서 따로 DOM파싱을 막지 않게(defer) 설정하지 않는 이상 보통 스크립트 태그는 다른 요소들 보다 아래에 선언한다. 